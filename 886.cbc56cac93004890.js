"use strict";(self.webpackChunkCinemaAppFrontend=self.webpackChunkCinemaAppFrontend||[]).push([[886],{8886:(Q,v,c)=>{c.r(v),c.d(v,{MoviesPageModule:()=>N});var g=c(6895),e=c(4650),C=c(9421),M=c(9299),P=c(4859),l=c(3546);function x(i,o){if(1&i&&(e.TgZ(0,"div")(1,"span",5),e._uU(2," | "),e.qZA(),e._uU(3),e.qZA()),2&i){const t=o.$implicit;e.xp6(3),e.hij(" ",t," ")}}function O(i,o){if(1&i&&(e.TgZ(0,"button",10),e._uU(1," 17:15"),e._UZ(2,"br"),e.TgZ(3,"small"),e._uU(4," 2D, Napisy "),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.s9C("disabled",!t.available),e.hYB("routerLink","booking/",null==n.movieData?null:n.movieData.id,"/",t.id,"")}}let Z=(()=>{class i{constructor(){this.screenings=[]}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-movie-card"]],inputs:{movieData:"movieData",screenings:"screenings"},decls:18,vars:7,consts:[[1,"my-card"],[1,"card-image"],["alt","Card Image",3,"src"],[1,"card-content"],[1,"details"],[1,"detail-spacer"],[4,"ngFor","ngForOf"],[1,"content-spacer"],[1,"screening-container"],["mat-raised-button","","color","primary","class","screening",3,"disabled","routerLink",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"screening",3,"disabled","routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"mat-card-title"),e._uU(5),e.qZA(),e.TgZ(6,"mat-card-subtitle")(7,"div",4),e._uU(8),e.TgZ(9,"span",5),e._uU(10," | "),e.qZA(),e._uU(11),e.YNc(12,x,4,1,"div",6),e.qZA()(),e.TgZ(13,"mat-card-content"),e._uU(14),e.qZA(),e._UZ(15,"div",7),e.TgZ(16,"div",8),e.YNc(17,O,5,3,"button",9),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("src",null==n.movieData?null:n.movieData.imageUrl,e.LSH),e.xp6(3),e.Oqu(null==n.movieData?null:n.movieData.title),e.xp6(3),e.hij(" ",null==n.movieData||null==n.movieData.date?null:n.movieData.date.getFullYear()," "),e.xp6(3),e.hij(" ",null==n.movieData?null:n.movieData.age," "),e.xp6(1),e.Q6J("ngForOf",null==n.movieData?null:n.movieData.details),e.xp6(2),e.Oqu(null==n.movieData?null:n.movieData.description),e.xp6(3),e.Q6J("ngForOf",n.screenings))},dependencies:[g.sg,M.rH,P.lW,l.a8,l.dn,l.$j,l.n5],styles:[".my-card[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;width:100%;padding:20px}.card-image[_ngcontent-%COMP%]{flex:0 0 25%;max-width:25%;height:100%;display:flex;justify-content:center;align-items:center;margin-right:1rem}.card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain}.card-content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}mat-card-content[_ngcontent-%COMP%]{padding:0}@media screen and (max-width: 600px){mat-card-content[_ngcontent-%COMP%]{display:none}.card-image[_ngcontent-%COMP%]{flex:0 0 auto;max-width:50%}}.content-spacer[_ngcontent-%COMP%]{flex-grow:1;flex-basis:auto}.screening-container[_ngcontent-%COMP%]{margin-top:1rem;align-self:flex-start;display:flex;flex-wrap:wrap;flex-direction:row;gap:5px}.screening[_ngcontent-%COMP%]{height:3rem!important;width:5rem!important;line-height:normal;overflow:hidden}.screening[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:6px}.details[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.detail-spacer[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px}"]}),i})();function w(i,o){if(1&i&&e._UZ(0,"app-movie-card",2),2&i){const t=o.$implicit;e.Q6J("movieData",t)("screenings",t.screenings)}}let y=(()=>{class i{constructor(t){this.cinemaService=t,this.images=[{src:"https://via.placeholder.com/300x300",alt:"Image 1"},{src:"https://via.placeholder.com/300x300",alt:"Image 2"},{src:"https://via.placeholder.com/300x300",alt:"Image 3"},{src:"https://via.placeholder.com/300x300",alt:"Image 4"},{src:"https://via.placeholder.com/300x300",alt:"Image 5"},{src:"https://via.placeholder.com/300x300",alt:"Image 6"}],this.movies=this.cinemaService.getMoviesWithTheirScreenings(1)}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-movies-page"]],decls:3,vars:3,consts:[[1,"image-gallery"],[3,"movieData","screenings",4,"ngFor","ngForOf"],[3,"movieData","screenings"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,w,1,2,"app-movie-card",1),e.ALo(2,"async"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,n.movies)))},dependencies:[g.sg,Z,g.Ov],styles:[".image-gallery[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}app-movie-card[_ngcontent-%COMP%]{width:90%;margin-bottom:20px}.image-caption[_ngcontent-%COMP%]{margin-left:10px}"]}),i})();var S=c(6127);class u{constructor(o,t,n){this.occupied=o,this.location={row:t,column:n}}}class d extends u{constructor(o,t,n,s){super(o,t,n),this.connected=s}get isLeft(){return this.connected.column>this.location.column}get isRight(){return!this.isLeft}}class f{constructor(){this.occupied=!0,this.location={row:-1,column:-1}}}var m=c(4006),p=c(6257),b=c(3336),h=c(4633),T=c(4144),_=c(9549);const k=["stepper"];function U(i,o){1&i&&e._uU(0,"Wyb\xf3r miejsc")}function A(i,o){1&i&&e._UZ(0,"div",23)}const F=function(i,o,t,n,s){return{free:i,occupied:o,selected:t,"double-left":n,"double-right":s}};function I(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",24),e.NdJ("click",function(){e.CHM(t);const s=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.seatOnClick(s))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("ngClass",e.qbA(3,F,!t.occupied,t.occupied,n.isSelected(t),n.isLoveSeat(t)&&n.isLoveSeatLeft(t),n.isLoveSeat(t)&&!n.isLoveSeatLeft(t))),e.xp6(1),e.AsE(" ",t.location.row,", ",t.location.column," ")}}function B(i,o){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,A,1,0,"div",21),e.YNc(2,I,2,9,"div",22),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isEmptySpace(t)),e.xp6(1),e.Q6J("ngIf",!n.isEmptySpace(t))}}function J(i,o){if(1&i&&(e.TgZ(0,"div",19),e.YNc(1,B,3,2,"div",20),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngForOf",t)}}function D(i,o){1&i&&e._uU(0,"Bilety")}function L(i,o){1&i&&(e.TgZ(0,"mat-error"),e._uU(1,"Brak wybranych miejsc!"),e.qZA())}function Y(i,o){if(1&i&&(e.TgZ(0,"mat-list-item",25)(1,"mat-icon",26),e._uU(2,"receipt"),e.qZA(),e.TgZ(3,"div"),e._uU(4),e.qZA()()),2&i){const t=o.$implicit;e.xp6(4),e.AsE(" Rz\u0105d: ",t.location.row,", Miejsce: ",t.location.column," ")}}function j(i,o){1&i&&e._uU(0,"Rezerwacja")}const q=[{path:"",component:y},{path:"booking/:movieId/:screeningId",component:(()=>{class i{constructor(t,n,s){this._formBuilder=t,this._matStepperIntl=n,this.cinemaService=s,this.seats=[],this.rows=6,this.columns=12,this.selected=new Set,this.emailFormGroup=this._formBuilder.group({emailCtrl:["",m.kI.required]});for(let a=0;a<5;a++){this.seats.push([]);for(let r=0;r<12;r++)this.seats[a].push(2==r||9==r?new f:new u(Math.random()>=.5,a,r<2?r:r>9?r-2:r-1))}this.seats.push([]);for(let a=0;a<12;a++)this.seats[5].push(new f);this.seats.push([]);for(let a=0;a<12;a++)this.seats[6].push((a+1)%2==1?new d(Math.random()>=.5,5,a,{row:5,column:a+1}):new d(this.seats[6][a-1].occupied,5,a,{row:5,column:a-1}));console.log(this.seats)}ngOnInit(){}isLoveSeat(t){return t instanceof d}isLoveSeatLeft(t){return t.isLeft}isSelected(t){return this.selected.has(t)}isEmptySpace(t){return t instanceof f}select(t){!this.isSelected(t)&&!t.occupied&&this.selected.add(t)}deselect(t){this.isSelected(t)&&this.selected.delete(t)}nextSeat(t){let n=this.findIndexes(t);if(n){let s=n?.[0];return this.seats[s][n?.[1]+1]}}previousSeat(t){let n=this.findIndexes(t);if(n){let s=n?.[0];return this.seats[s][n?.[1]-1]}}findIndexes(t){const n=this.seats.find(s=>s.includes(t));if(n)return[this.seats.findIndex(r=>r===n),n.findIndex(r=>r===t)]}seatOnClick(t){this.isSelected(t)?t instanceof d?t.connected.column==t.location.column+1?(this.deselect(t),this.deselect(this.nextSeat(t))):(this.deselect(this.previousSeat(t)),this.deselect(t)):this.deselect(t):t instanceof d?t.connected.column==t.location.column+1?(this.select(t),this.select(this.nextSeat(t))):(this.select(this.previousSeat(t)),this.select(t)):this.select(t)}checkSeatSelection(){return this.selected.size>0}isStepperValid(){return this.emailFormGroup.valid&&this.checkSeatSelection()}submit(){this.emailFormGroup.valid&&this.checkSeatSelection()&&this.cinemaService.isCinemaSet&&this.makeReservation()}makeReservation(){console.log("Making Reservation"),this.cinemaService.getSelectedCinema()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(m.qu),e.Y36(p.$c),e.Y36(C.r))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-booking-page"]],viewQuery:function(t,n){if(1&t&&e.Gf(k,5),2&t){let s;e.iGM(s=e.CRH())&&(n.stepper=s.first)}},decls:46,vars:9,consts:[[3,"linear"],["stepper",""],[3,"hasError"],["matStepLabel",""],[1,"seats"],[1,"wrapper"],[1,"screen"],[1,"cinema-layout-grid"],["class","cinema-row",4,"ngFor","ngForOf"],["mat-button","","matStepperNext",""],[4,"ngIf"],[1,"selected-seats"],["class","ticket",4,"ngFor","ngForOf"],["mat-button","","matStepperPrevious",""],["mat-button","","matStepperNext","",3,"disabled"],["errorMessage","Uzupe\u0142nij e-mail",3,"stepControl"],[3,"formGroup"],["matInput","","formControlName","emailCtrl","placeholder","xyz@email.com"],["mat-button","",3,"disabled","click"],[1,"cinema-row"],[4,"ngFor","ngForOf"],["class","seat empty-space",4,"ngIf"],["class","seat",3,"ngClass","click",4,"ngIf"],[1,"seat","empty-space"],[1,"seat",3,"ngClass","click"],[1,"ticket"],["matListItemIcon",""]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e._uU(3,"Nazwa filmu"),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5,"godzina | dzie\u0144 tygodnia | data"),e.qZA()(),e._UZ(6,"mat-card-content"),e.qZA(),e._UZ(7,"br"),e.TgZ(8,"mat-card")(9,"mat-stepper",0,1)(11,"mat-step",2),e.YNc(12,U,1,0,"ng-template",3),e.TgZ(13,"div",4)(14,"div",5)(15,"div",6),e._uU(16,"Ekran"),e.qZA(),e.TgZ(17,"div",7),e.YNc(18,J,2,1,"div",8),e.qZA()()(),e._UZ(19,"br"),e.TgZ(20,"div")(21,"button",9),e._uU(22,"Dalej"),e.qZA()()(),e.TgZ(23,"mat-step"),e.YNc(24,D,1,0,"ng-template",3),e._uU(25," Bilety: "),e.YNc(26,L,2,0,"mat-error",10),e.TgZ(27,"mat-list",11),e.YNc(28,Y,5,2,"mat-list-item",12),e.qZA(),e._UZ(29,"br"),e.TgZ(30,"div")(31,"button",13),e._uU(32,"Wr\xf3\u0107"),e.qZA(),e.TgZ(33,"button",14),e._uU(34,"Dalej"),e.qZA()()(),e.TgZ(35,"mat-step",15),e.YNc(36,j,1,0,"ng-template",3),e.TgZ(37,"form",16)(38,"mat-form-field")(39,"mat-label"),e._uU(40,"Tw\xf3j e-mail"),e.qZA(),e._UZ(41,"input",17),e.qZA()(),e.TgZ(42,"div")(43,"button",18),e.NdJ("click",function(){return n.submit()}),e._uU(44,"Zarezerwuj"),e.qZA()()()()(),e._UZ(45,"br")),2&t&&(e.xp6(9),e.Q6J("linear",!0),e.xp6(2),e.Q6J("hasError",!n.checkSeatSelection()),e.xp6(7),e.Q6J("ngForOf",n.seats),e.xp6(8),e.Q6J("ngIf",!n.checkSeatSelection()),e.xp6(2),e.Q6J("ngForOf",n.selected),e.xp6(5),e.Q6J("disabled",!n.checkSeatSelection()),e.xp6(2),e.Q6J("stepControl",n.emailFormGroup),e.xp6(2),e.Q6J("formGroup",n.emailFormGroup),e.xp6(6),e.Q6J("disabled",!n.isStepperValid()))},dependencies:[g.mk,g.sg,g.O5,b.Hw,P.lW,h.i$,h.Tg,h.Yt,T.Nt,_.KE,_.hX,_.TO,l.a8,l.dn,l.dk,l.$j,l.n5,p.C0,p.VY,p.Vq,p.Ic,p.fd,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u],styles:[".selected-seats[_ngcontent-%COMP%]{flex:1 0 0}.order-summary[_ngcontent-%COMP%]{min-width:100%}mat-stepper[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}.seats[_ngcontent-%COMP%]{display:flex;justify-content:center}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{overflow:auto}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .screen[_ngcontent-%COMP%]{width:100%;border-top:rgb(136,136,136) 3px solid;text-align:center;margin-top:1em;margin-bottom:1em}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;overflow:auto}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]{display:flex}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat[_ngcontent-%COMP%]{min-width:40px;margin-left:2px;margin-right:2px;aspect-ratio:1/1;border-radius:5px;display:flex;justify-content:center;align-items:center;cursor:pointer}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat.double-left[_ngcontent-%COMP%]{margin-right:0;min-width:42px;border-radius:5px 0 0 5px}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat.double-right[_ngcontent-%COMP%]{margin-left:0;min-width:42px;border-radius:0 5px 5px 0}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat.empty-space[_ngcontent-%COMP%]{background-color:#0000!important;color:#0000!important;cursor:default}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat.free[_ngcontent-%COMP%]{background-color:#888}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat.occupied[_ngcontent-%COMP%]{background-color:#cd1111}.seats[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   .cinema-layout-grid[_ngcontent-%COMP%]   .cinema-row[_ngcontent-%COMP%]   .seat.selected[_ngcontent-%COMP%]{background-color:#41d510}.ticket[_ngcontent-%COMP%]{margin-bottom:4px;border:2px solid rgb(34,34,34);border-radius:4px}"]}),i})()}];let N=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.ez,M.Bz.forChild(q),S.m,m.UX]}),i})()}}]);