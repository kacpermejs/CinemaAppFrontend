"use strict";(self.webpackChunkCinemaAppFrontend=self.webpackChunkCinemaAppFrontend||[]).push([[678],{3678:(U,s,i)=>{i.r(s),i.d(s,{TicketValidationPageModule:()=>I});var r=i(6895),o=i(4006),t=i(4650),u=i(529),k=i(9578);let h=(()=>{class e{constructor(a,n){this.http=a,this.auth=n,this.baseUrl="/api/usher"}getTicket(a){const n=this.getHeaders();return this.http.get(this.baseUrl+"/check-ticket?forId="+a,{headers:n})}getHeaders(){return new u.WM({Authorization:`Bearer ${this.auth.getToken()}`})}validateTicket(a){const n=this.getHeaders();return this.http.patch(this.baseUrl+"/validate-ticket?forId="+a,{headers:n})}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(u.eN),t.LFG(k.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var v=i(4859),p=i(4850),T=i(4144),d=i(9549),l=i(3546);function f(e,c){1&e&&(t.TgZ(0,"mat-card")(1,"mat-card-content"),t._uU(2," Nie znaleziono "),t.qZA()())}function g(e,c){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const a=c.$implicit;t.xp6(1),t.hij(" Miejsce: ",a," ")}}function D(e,c){if(1&e){const a=t.EpF();t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div"),t._uU(3),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA(),t.TgZ(6,"div"),t._uU(7),t.qZA(),t.TgZ(8,"div"),t._uU(9),t.qZA(),t.TgZ(10,"div"),t._uU(11),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.qZA(),t.TgZ(14,"div"),t._uU(15),t.qZA(),t.TgZ(16,"div"),t._uU(17),t.qZA(),t.TgZ(18,"div"),t._uU(19),t.qZA(),t.TgZ(20,"div"),t._uU(21),t.qZA(),t.YNc(22,g,2,1,"div",4),t.qZA(),t.TgZ(23,"mat-card-actions")(24,"button",5),t.NdJ("click",function(){t.CHM(a);const m=t.oxw();return t.KtG(m.onValidate())}),t._uU(25," Skasuj "),t.qZA()()()}if(2&e){const a=t.oxw();t.xp6(3),t.hij(" Numer rezerwacji: ",null==a.ticketData?null:a.ticketData.id," "),t.xp6(2),t.hij(" Numer rezerwacji: ",null==a.ticketData?null:a.ticketData.reservationStatus," "),t.xp6(2),t.hij(" Imi\u0119: ",null==a.ticketData||null==a.ticketData.contactData?null:a.ticketData.contactData.firstName," "),t.xp6(2),t.hij(" Nazwisko: ",null==a.ticketData||null==a.ticketData.contactData?null:a.ticketData.contactData.lastName," "),t.xp6(2),t.hij(" Email: ",null==a.ticketData||null==a.ticketData.contactData?null:a.ticketData.contactData.email," "),t.xp6(2),t.hij(" Telefon: ",null==a.ticketData||null==a.ticketData.contactData?null:a.ticketData.contactData.phoneNumber," "),t.xp6(2),t.hij(" Data: ",null==a.ticketData?null:a.ticketData.dateTime," "),t.xp6(2),t.hij(" Film: ",null==a.ticketData?null:a.ticketData.film," "),t.xp6(2),t.hij(" Sala: ",null==a.ticketData?null:a.ticketData.hallName," "),t.xp6(2),t.hij(" Liczba miejsc: ",null==a.ticketData?null:a.ticketData.numberOfSeats," "),t.xp6(1),t.Q6J("ngForOf",null==a.ticketData?null:a.ticketData.reservedSeatsIds)}}let Z=(()=>{class e{constructor(a,n){this._formBuilder=a,this.ticketService=n,this.ticketFormGroup=this._formBuilder.group({reservationIdCtrl:["",o.kI.required]}),this.success=!1}ngOnInit(){}checkTicket(){this.ticketService.getTicket(+this.ticketFormGroup.value.reservationIdCtrl).subscribe({next:a=>{console.log(a),this.ticketData=a,this.success=!0},error:a=>{console.error(a),this.success=!1}})}onValidate(){this.ticketData&&this.ticketService.validateTicket(this.ticketData.id).subscribe()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(o.qu),t.Y36(h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-ticket-validation-page"]],decls:15,vars:4,consts:[[3,"formGroup"],["matInput","","formControlName","reservationIdCtrl"],["mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"]],template:function(a,n){1&a&&(t.TgZ(0,"mat-card")(1,"mat-card-content")(2,"form",0)(3,"mat-form-field")(4,"mat-label"),t._uU(5,"Numer reserwacji"),t.qZA(),t._UZ(6,"input",1),t.qZA()(),t._UZ(7,"mat-divider"),t.qZA(),t.TgZ(8,"mat-card-actions")(9,"button",2),t.NdJ("click",function(){return n.checkTicket()}),t._uU(10," Sprawd\u017a "),t.qZA()()(),t._UZ(11,"br"),t.YNc(12,f,3,0,"mat-card",3),t.YNc(13,D,26,11,"mat-card",3),t._UZ(14,"br")),2&a&&(t.xp6(2),t.Q6J("formGroup",n.ticketFormGroup),t.xp6(7),t.Q6J("disabled",!n.ticketFormGroup.valid),t.xp6(3),t.Q6J("ngIf",!n.success),t.xp6(1),t.Q6J("ngIf",n.success))},dependencies:[r.sg,r.O5,v.lW,p.d,T.Nt,d.KE,d.hX,l.a8,l.hq,l.dn,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u]}),e})();var S=i(9299),A=i(6127);const C=[{path:"",component:Z}];let I=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[r.ez,S.Bz.forChild(C),A.m,o.UX]}),e})()}}]);